<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Realistic Solar System â€” Cinematic + Sci-Fi HUD</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Roboto', sans-serif; }

        /* Sci-Fi HUD Panel */
        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 280px;
            padding: 20px;
            border-radius: 12px;
            background: rgba(0, 255, 255, 0.08);
            border: 1px solid rgba(0, 255, 255, 0.3);
            backdrop-filter: blur(8px);
            color: cyan;
            display: none;
        }
        #hud h2 {
            margin: 0 0 10px;
            color: #00eaff;
            font-weight: 700;
            font-size: 22px;
        }
        #hud p {
            margin: 5px 0;
            font-size: 14px;
            line-height: 1.4;
        }

        /* Loading overlay */
        #loading {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            background: #000;
            color: white;
            font-size: 24px;
        }
    </style>
</head>
<body>

<div id="loading">Loading solar system...</div>
<div id="hud"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/examples/js/controls/OrbitControls.js"></script>

<script>
// ------------------------------------------------------
//  INITIAL SETUP
// ------------------------------------------------------
const scene = new THREE.Scene();
scene.fog = new THREE.FogExp2(0x000000, 0.0008);

const camera = new THREE.PerspectiveCamera(
    55, window.innerWidth / window.innerHeight, 0.1, 20000
);
camera.position.set(0, 80, 260);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
document.body.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.05;

// ------------------------------------------------------
//  LIGHTING
// ------------------------------------------------------
const ambient = new THREE.AmbientLight(0xffffff, 0.25);
scene.add(ambient);

const sunLight = new THREE.PointLight(0xffffff, 4, 0, 2);
scene.add(sunLight);

// ------------------------------------------------------
//  STARFIELD BACKGROUND
// ------------------------------------------------------
const starTexture = new THREE.TextureLoader().load(
    "https://cdn.jsdelivr.net/gh/mrdoob/three.js@master/examples/textures/planets/starfield.jpg"
);
const stars = new THREE.Mesh(
    new THREE.SphereGeometry(9000, 64, 64),
    new THREE.MeshBasicMaterial({ map: starTexture, side: THREE.BackSide })
);
scene.add(stars);

// ------------------------------------------------------
//  PLANET DATA (CDN TEXTURES)
// ------------------------------------------------------
const planetsData = [
    {
        name: "Sun",
        radius: 45,
        distance: 0,
        rotation: 0.0008,
        lowRes: "https://raw.githubusercontent.com/josephsurin/threejs-planets/master/textures/sun.jpg",
        highRes: "https://raw.githubusercontent.com/josephsurin/threejs-planets/master/textures/sun.jpg",
        animatedSun: true
    },
    {
        name: "Mercury",
        radius: 3,
        distance: 70,
        rotation: 0.004,
        lowRes: "https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/mercury.jpg",
        highRes: "https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/mercury.jpg"
    },
    {
        name: "Venus",
        radius: 5,
        distance: 95,
        rotation: 0.002,
        lowRes: "https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/venus.jpg",
        highRes: "https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/venus.jpg"
    },
    {
        name: "Earth",
        radius: 6,
        distance: 120,
        rotation: 0.01,
        lowRes: "https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_atmos_2048.jpg",
        highRes: "https://cdn.jsdelivr.net/gh/ajaymt/earth-4k/textures/earth_daymap_4k.jpg",
        clouds: "https://raw.githubusercontent.com/josephsurin/threejs-planets/master/textures/earth_clouds.png"
    },
    {
        name: "Mars",
        radius: 4,
        distance: 150,
        rotation: 0.008,
        lowRes: "https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/mars_1k_color.jpg",
        highRes: "https://www.solarsystemscope.com/textures/download/2k_mars.jpg"
    },
    {
        name: "Jupiter",
        radius: 14,
        distance: 210,
        rotation: 0.02,
        lowRes: "https://www.solarsystemscope.com/textures/download/2k_jupiter.jpg",
        highRes: "https://www.solarsystemscope.com/textures/download/4k_jupiter.jpg"
    },
    {
        name: "Saturn",
        radius: 12,
        distance: 270,
        rotation: 0.018,
        lowRes: "https://www.solarsystemscope.com/textures/download/2k_saturn.jpg",
        highRes: "https://www.solarsystemscope.com/textures/download/4k_saturn.jpg",
        rings: "https://www.solarsystemscope.com/textures/download/2k_saturn_ring_alpha.png"
    },
    {
        name: "Uranus",
        radius: 10,
        distance: 330,
        rotation: 0.01,
        lowRes: "https://www.solarsystemscope.com/textures/download/2k_uranus.jpg",
        highRes: "https://www.solarsystemscope.com/textures/download/4k_uranus.jpg"
    },
    {
        name: "Neptune",
        radius: 10,
        distance: 390,
        rotation: 0.012,
        lowRes: "https://www.solarsystemscope.com/textures/download/2k_neptune.jpg",
        highRes: "https://www.solarsystemscope.com/textures/download/4k_neptune.jpg"
    }
];

// ------------------------------------------------------
//  CREATE PLANETS
// ------------------------------------------------------
let planets = [];
const loader = new THREE.TextureLoader();

planetsData.forEach(data => {
    const tex = loader.load(data.lowRes);

    const geo = new THREE.SphereGeometry(data.radius, 64, 64);
    const mat = new THREE.MeshStandardMaterial({
        map: tex
    });

    const planet = new THREE.Mesh(geo, mat);
    planet.position.x = data.distance;
    planet.userData = data;

    // Saturn rings
    if (data.rings) {
        const ringTex = loader.load(data.rings);
        const ringGeo = new THREE.RingGeometry(
            data.radius + 2,
            data.radius + 8,
            64
        );

        const ringMat = new THREE.MeshBasicMaterial({
            map: ringTex,
            side: THREE.DoubleSide,
            transparent: true
        });

        const ring = new THREE.Mesh(ringGeo, ringMat);
        ring.rotation.x = Math.PI / 2;
        planet.add(ring);
    }

    // Earth clouds
    if (data.clouds) {
        const cloudsGeo = new THREE.SphereGeometry(data.radius + 0.15, 64, 64);
        const cloudsMat = new THREE.MeshPhongMaterial({
            map: loader.load(data.clouds),
            transparent: true,
            opacity: 0.5
        });
        const cloudMesh = new THREE.Mesh(cloudsGeo, cloudsMat);
        planet.add(cloudMesh);
        planet.cloudMesh = cloudMesh;
    }

    scene.add(planet);
    planets.push(planet);
});

// ------------------------------------------------------
//  SUN SURFACE ANIMATION
// ------------------------------------------------------
let sun = planets[0];
let sunTime = 0;

// ------------------------------------------------------
//  RAYCASTING FOR PLANET CLICK
// ------------------------------------------------------
const raycaster = new THREE.Raycaster();
const mouse = new THREE.Vector2();
let focusedPlanet = null;

window.addEventListener("click", e => {
    mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;

    raycaster.setFromCamera(mouse, camera);
    const hits = raycaster.intersectObjects(planets);

    if (hits.length > 0) {
        focusPlanet(hits[0].object);
    }
});

// ------------------------------------------------------
//  FOCUS CAMERA + HUD + HIGH RES TEXTURE SWAP
// ------------------------------------------------------
const hud = document.getElementById("hud");

function focusPlanet(planet) {
    focusedPlanet = planet;
    const data = planet.userData;

    // CAMERA ANIMATION
    const targetPos = new THREE.Vector3(
        planet.position.x,
        planet.position.y + data.radius * 0.5,
        planet.position.z + data.radius * 4
    );

    gsap.to(camera.position, {
        duration: 1.5,
        x: targetPos.x,
        y: targetPos.y,
        z: targetPos.z,
        ease: "power2.out"
    });

    controls.target.set(
        planet.position.x,
        planet.position.y,
        planet.position.z
    );

    // HUD INFO
    hud.innerHTML = `
        <h2>${data.name}</h2>
        <p><strong>Radius:</strong> ${data.radius} units</p>
        <p><strong>Orbit distance:</strong> ${data.distance || "Center"}</p>
        <p><strong>Rotation speed:</strong> ${data.rotation}</p>
    `;
    hud.style.display = "block";

    // HIGH RES TEXTURE SWAP
    loader.load(data.highRes, texture => {
        planet.material.map = texture;
        planet.material.needsUpdate = true;
    });
}

// ------------------------------------------------------
//  ANIMATION LOOP
// ------------------------------------------------------
function animate() {
    requestAnimationFrame(animate);

    planets.forEach(p => {
        p.rotation.y += p.userData.rotation;

        if (p.cloudMesh) {
            p.cloudMesh.rotation.y += 0.002;
        }
    });

    // sun animated surface
    sunTime += 0.01;
    if (sun) {
        sun.scale.set(
            1 + Math.sin(sunTime) * 0.02,
            1 + Math.sin(sunTime) * 0.02,
            1 + Math.sin(sunTime) * 0.02
        );
    }

    controls.update();
    renderer.render(scene, camera);
}
animate();

// ------------------------------------------------------
//  REMOVE LOADING SCREEN
// ------------------------------------------------------
setTimeout(() => {
    document.getElementById("loading").style.display = "none";
}, 1000);

// ------------------------------------------------------
//  RESIZE
// ------------------------------------------------------
window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

<!-- GSAP for smooth camera animation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

</body>
</html>
